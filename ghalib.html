<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
@import url(http://fonts.googleapis.com/earlyaccess/notonastaliqurdudraft.css);
body {
	width: 45em;
	text-align: justify;
	margin: auto;
	margin-top: 2em;
	margin-bottom: 10em;
}
*[lang=ur] {
	direction: rtl;
	font-family: 'Noto Nastaliq Urdu Draft', serif;
}
table {
	margin: auto;
	text-align: center;
}
</style>
<title>Noto Nastaliq Urdu test page</title>
</head>
<body>

<h1>Noto Nastaliq Urdu test page</h1>
<b><a href="http://behdad.org/">Behdad Esfahbod</a></b><br>
Originally written: November 10, 2014<br>
Last updated: November 10, 2014

<h2>Introduction</h2>
<a href="https://en.wikipedia.org/wiki/Nasta%CA%BFl%C4%ABq_script">Nastaliq</a> is a calligraphic
style of writing the Perso-Arabic script commonly used for writing Urdu, Punjabi, Kashmiri, and Persian,
among others.
Nastaliq is the preferred style for <a href="https://en.wikipedia.org/wiki/Body_text">body text</a>
and is <a href="https://www.google.com/search?q=urdu+newspaper">used</a> to typeset newspapers to this day.
While in Persian, Nastaliq is used, for the most part, as a display / titling face.
<p>
There have been Nastaliq OpenType fonts (both Urdu- and Persian-style) available on the internet
for <a href="http://www.pango.org/ScriptGallery">quite a few years</a>.  Recently, at Google we
released a draft version of the &ldquo;Noto Nastaliq Urdu&rdquo; font as part of the expansion of the
<a href="http://google.com/get/noto">Noto fonts</a> project.
This page showcases the Noto Nastaliq Urdu Draft font.
<p>
Here is a verse of poetry from
<a href="https://en.wikipedia.org/wiki/Ghalib">Ghalib</a> using the webfont:
<p lang="ur" align="center">
اور بازار سے لے آئے اگر ٹوٹ گیا<br>
ساغرِ جم سے مرا جامِ سفال اچّھا ہے
</p>

<h2>Where to get</h2>
The draft version of the font can be downloaded from the <a href="http://www.google.com/get/noto/">Noto homepage</a>
or directly from the <a href="https://noto.googlecode.com/git/fonts/alpha/NotoNastaliqUrduDraft.ttf">Noto repository</a>.
It is also <a href="http://www.google.com/fonts/earlyaccess#Noto+Nastaliq+Urdu+Draft">available as a webfont</a>
on Google Fonts Early Access.
<p>
I will update this page when the final version of the font is released.
Please report any issues you might find with the font at <a href="https://code.google.com/p/noto/issues/entry">https://code.google.com/p/noto/issues/entry</a>.
The list of currently known issues is at the <a href="https://code.google.com/p/noto/issues/list?can=2&q=Noto+Nastaliq"</a>Noto issue tracker</a>.

<h2>Compatibility</h2>
This section is currently up to date as of November 10, 2014.
<p>
The font should render correctly on most <i>modern</i> browsers.
Older versions of all browsers might be broken, and there is not much that can be done about
them.  This includes the old Android Browser (as opposed to Chrome on Android).

<h3>Google Chrome</h3>
Recent versions of Chrome should not have any problems on platforms other than OS X.
Chrome Mac 39 and earlier suffer from severe
<a href="https://code.google.com/p/noto/issues/detail?id=187&q=Noto%20Nastaliq">positioning issues</a>
that make the font practically unusable.
This has been <a href="https://code.google.com/p/chromium/issues/detail?id=352736">fixed</a>
in Chrome 40 already, and should get out to users over time.  In the mean time, you can try the Chrome Mac
<a href="https://www.google.com/chrome/browser/?platform=mac&extra=devchannel">Dev channel</a>.
Chrome on iOS might suffer from the same problems as Safari (see below), I have not tested that.

<h3>Firefox</h3>
Firefox 33 and earlier render correctly but freeze for a few seconds when loading the font.
That <a href="https://code.google.com/p/noto/issues/detail?id=186">bug</a>
is fixed in <a href="https://www.mozilla.org/en-US/firefox/channel/#beta">Firefox 34 Beta</a>,
to be released as stable on November 25, 2014.

<h3>Internet Explorer</h3>
IE 11 works just fine in my testing.  I have not tested other versions.

<h3>Safari</h3>
Safari suffers from the same
<a href="https://code.google.com/p/noto/issues/detail?id=187&q=Noto%20Nastaliq">positioning issues</a>
that Chrome Mac used to (discussed above).
This bug is being tracked <a href="https://bugs.webkit.org/show_bug.cgi?id=138213">here</a>,
but I expect it to take a while to get fixed and delivered to users.


<h2>Typesetting poetry for the web</h2>
I have been interested in typesetting Persian poetry on the web since at least 2002.
In Urdu and Persian classical poetry, Nastaliq is the preferred style,
and poems are set in two columns of justified text with the same column widths.
<p>
In the rest of this section I'm using a full sonnet from Ghalib, available from
<a href="http://wikisource.org/wiki/%D8%AF%DB%8C%D9%88%D8%A7%D9%86_%D8%BA%D8%A7%D9%84%D8%A8/%D8%BA%D8%B2%D9%84%DB%8C%D8%A7%D8%AA/%D8%B1%D8%AF%DB%8C%D9%81_%DB%92#206">Wikisource</a>.

<h3>Center-aligned</h3>
The easiest way to set a two-column poem is to center-align each column.
This is how it would look like:

<style>
.poetryAlignCenter td { text-align: center; }
.poetryAlignCenter td:nth-child(2n+1) { padding-left: 1em; }
.poetryAlignCenter td:nth-child(2n+0) { padding-right: 1em; }
</style>
<table lang="ur" class="poetryAlignCenter">
<tr><td>حسنِ مہ گرچہ بہ ہنگامِ کمال اچّھا ہے</td>
<td>اس سے میرا مہِ خورشید جمال اچّھا ہے</td></tr>
<tr><td>بوسہ دیتے نہیں اور دل پہ ہے ہر لحظہ نگاہ</td>
<td>جی میں کہتے ہیں کہ مفت آئے تو مال اچّھا ہے</td></tr>
<tr><td>اور بازار سے لے آئے اگر ٹوٹ گیا</td>
<td>ساغرِ جم سے مرا جامِ سفال اچّھا ہے</td></tr>
<tr><td>بے طلب دیں تو مزہ اس میں سوا ملتا ہے</td>
<td>وہ گدا جس کو نہ ہو خوۓ سوال اچّھا ہے</td></tr>
<tr><td>ان کے دیکھے سے جو آ جاتی ہے منہ پر رونق</td>
<td>وہ سمجھتے ہیں کہ بیمار کا حال اچّھا ہے</td></tr>
<tr><td>دیکھیے پاتے ہیں عشّاق بتوں سے کیا فیض</td>
<td>اک برہمن نے کہا ہے کہ یہ سال اچّھا ہے</td></tr>
<tr><td>ہم سخن تیشے نے فرہاد کو شیریں سے کیا</td>
<td>جس طرح کا کہ کسی میں ہو کمال اچّھا ہے</td></tr>
<tr><td>قطرہ دریا میں جو مل جائے تو دریا ہو جائے</td>
<td>کام اچّھا ہے وہ، جس کا کہ مآل اچّھا ہے</td></tr>
<tr><td>خضر سلطاں کو رکھے خالقِ اکبر سر سبز</td>
<td>شاہ کے باغ میں یہ تازہ نہال اچّھا ہے</td></tr>
<tr><td>ہم کو معلوم ہے جنّت کی حقیقت لیکن</td>
<td>دل کے خوش رکھنے کو غالب یہ خیال اچّھا ہے</td></tr>
</table>

<p>
It is not very pleasing, but easiest to set.  At least, if you are lucky, the font works.

<h3>Side-aligned</h3>
A slight improvement would be to align the sides:

<style>
.poetryAlignSides td:nth-child(2n+1) { text-align: right; padding-left: .5em; }
.poetryAlignSides td:nth-child(2n+0) { text-align: left; padding-right: .5em; }
</style>
<table lang="ur" class="poetryAlignSides">
<tr><td>حسنِ مہ گرچہ بہ ہنگامِ کمال اچّھا ہے</td>
<td>اس سے میرا مہِ خورشید جمال اچّھا ہے</td></tr>
<tr><td>بوسہ دیتے نہیں اور دل پہ ہے ہر لحظہ نگاہ</td>
<td>جی میں کہتے ہیں کہ مفت آئے تو مال اچّھا ہے</td></tr>
<tr><td>اور بازار سے لے آئے اگر ٹوٹ گیا</td>
<td>ساغرِ جم سے مرا جامِ سفال اچّھا ہے</td></tr>
<tr><td>بے طلب دیں تو مزہ اس میں سوا ملتا ہے</td>
<td>وہ گدا جس کو نہ ہو خوۓ سوال اچّھا ہے</td></tr>
<tr><td>ان کے دیکھے سے جو آ جاتی ہے منہ پر رونق</td>
<td>وہ سمجھتے ہیں کہ بیمار کا حال اچّھا ہے</td></tr>
<tr><td>دیکھیے پاتے ہیں عشّاق بتوں سے کیا فیض</td>
<td>اک برہمن نے کہا ہے کہ یہ سال اچّھا ہے</td></tr>
<tr><td>ہم سخن تیشے نے فرہاد کو شیریں سے کیا</td>
<td>جس طرح کا کہ کسی میں ہو کمال اچّھا ہے</td></tr>
<tr><td>قطرہ دریا میں جو مل جائے تو دریا ہو جائے</td>
<td>کام اچّھا ہے وہ، جس کا کہ مآل اچّھا ہے</td></tr>
<tr><td>خضر سلطاں کو رکھے خالقِ اکبر سر سبز</td>
<td>شاہ کے باغ میں یہ تازہ نہال اچّھا ہے</td></tr>
<tr><td>ہم کو معلوم ہے جنّت کی حقیقت لیکن</td>
<td>دل کے خوش رکھنے کو غالب یہ خیال اچّھا ہے</td></tr>
</table>

<p>
I personally find it hard to call this an improvement, especially with this font.
But it is a valid approach, and documented here for the sake of completeness
and visual comparison.

<h3>text-align-last</h3>
The more natural way to justify poetry is to use the CSS
<code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-align-last">text-align-last</a></code>,
which for all we care about, is designed <i>exactly</i> to do this.
Unfortunately its support across browsers and CSS versions has been flaky.
<p>
It started IE-only and was added to CSS 3 draft years ago.
These days looks like Firefox supports it prefixed,
I could not get Chrome or Safari to work, even though they are
<a href="https://bugs.webkit.org/show_bug.cgi?id=76173">supposed to support it</a> to differing extents.
IE works, but only when <code>text-align:justify</code> is used.
This caught me by surprise, but that is what it does.
<p>
For what it's worth, this property was moved from CSS 3 to
<a href="http://dev.w3.org/csswg/css-text-4/#text-align-last">CSS 4</a>.
So, for now I think it is a useful fallback, but does not work everywhere.
<p>
Here it is in action:

<style>
.poetryJustifyLast td {
	text-align: justify;
	text-align-last: justify;
	-o-text-align-last: justify;
	-ms-text-align-last: justify;
	-moz-text-align-last: justify;
	-webkit-text-align-last: justify;
}
.poetryJustifyLast td:nth-child(2n+1) { padding-left: 1.5em; }
.poetryJustifyLast td:nth-child(2n+0) { padding-right: 1.5em; }
</style>
<table lang="ur" class="poetryJustifyLast">
<tr><td>حسنِ مہ گرچہ بہ ہنگامِ کمال اچّھا ہے</td>
<td>اس سے میرا مہِ خورشید جمال اچّھا ہے</td></tr>
<tr><td>بوسہ دیتے نہیں اور دل پہ ہے ہر لحظہ نگاہ</td>
<td>جی میں کہتے ہیں کہ مفت آئے تو مال اچّھا ہے</td></tr>
<tr><td>اور بازار سے لے آئے اگر ٹوٹ گیا</td>
<td>ساغرِ جم سے مرا جامِ سفال اچّھا ہے</td></tr>
<tr><td>بے طلب دیں تو مزہ اس میں سوا ملتا ہے</td>
<td>وہ گدا جس کو نہ ہو خوۓ سوال اچّھا ہے</td></tr>
<tr><td>ان کے دیکھے سے جو آ جاتی ہے منہ پر رونق</td>
<td>وہ سمجھتے ہیں کہ بیمار کا حال اچّھا ہے</td></tr>
<tr><td>دیکھیے پاتے ہیں عشّاق بتوں سے کیا فیض</td>
<td>اک برہمن نے کہا ہے کہ یہ سال اچّھا ہے</td></tr>
<tr><td>ہم سخن تیشے نے فرہاد کو شیریں سے کیا</td>
<td>جس طرح کا کہ کسی میں ہو کمال اچّھا ہے</td></tr>
<tr><td>قطرہ دریا میں جو مل جائے تو دریا ہو جائے</td>
<td>کام اچّھا ہے وہ، جس کا کہ مآل اچّھا ہے</td></tr>
<tr><td>خضر سلطاں کو رکھے خالقِ اکبر سر سبز</td>
<td>شاہ کے باغ میں یہ تازہ نہال اچّھا ہے</td></tr>
<tr><td>ہم کو معلوم ہے جنّت کی حقیقت لیکن</td>
<td>دل کے خوش رکھنے کو غالب یہ خیال اچّھا ہے</td></tr>
</table>

<h3>Polyfill</h3>
Given that <code>text-justify-last</code> does not quite work, many people
have tried to achieve the same effect using CSS2 and CSS3.  I did just that
over ten years ago on <a href="http://rira.ir/?page=view&mod=classicpoems&obj=poem&id=1">RiRa</a>.
<p>
Back then, the
<code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::after">::after</a></code>
pseudo-element was not widely supported, if defined at all.
My solution involved adding a span at the end of each verse, and thus
making sure this span had to be layed out to a new line by forcing
<code>padding-right: 100%</code>, causing the first line to be justified in
the process.
<p>
<p>
Times have changed since, and I found a much cleaner
<a href="http://stackoverflow.com/questions/4771304/justify-the-last-line-of-a-div">implementation</a>
of the same idea that does not involve modifying the HTML.  And it seems to work
very well across recent versions of Chrome, Firefox, and IE.  Here it is:

<style>
.poetryJustifyCSS3 td {
	text-align: justify;
}
.poetryJustifyCSS3 td::after{
	content: "";
	display: inline-block;
	width: 100%;
}
.poetryJustifyCSS3 td:nth-child(2n+1) { padding-left: 1.5em; }
.poetryJustifyCSS3 td:nth-child(2n+0) { padding-right: 1.5em; }
</style>
<table lang="ur" class="poetryJustifyCSS3">
<tr><td>حسنِ مہ گرچہ بہ ہنگامِ کمال اچّھا ہے</td>
<td>اس سے میرا مہِ خورشید جمال اچّھا ہے</td></tr>
<tr><td>بوسہ دیتے نہیں اور دل پہ ہے ہر لحظہ نگاہ</td>
<td>جی میں کہتے ہیں کہ مفت آئے تو مال اچّھا ہے</td></tr>
<tr><td>اور بازار سے لے آئے اگر ٹوٹ گیا</td>
<td>ساغرِ جم سے مرا جامِ سفال اچّھا ہے</td></tr>
<tr><td>بے طلب دیں تو مزہ اس میں سوا ملتا ہے</td>
<td>وہ گدا جس کو نہ ہو خوۓ سوال اچّھا ہے</td></tr>
<tr><td>ان کے دیکھے سے جو آ جاتی ہے منہ پر رونق</td>
<td>وہ سمجھتے ہیں کہ بیمار کا حال اچّھا ہے</td></tr>
<tr><td>دیکھیے پاتے ہیں عشّاق بتوں سے کیا فیض</td>
<td>اک برہمن نے کہا ہے کہ یہ سال اچّھا ہے</td></tr>
<tr><td>ہم سخن تیشے نے فرہاد کو شیریں سے کیا</td>
<td>جس طرح کا کہ کسی میں ہو کمال اچّھا ہے</td></tr>
<tr><td>قطرہ دریا میں جو مل جائے تو دریا ہو جائے</td>
<td>کام اچّھا ہے وہ، جس کا کہ مآل اچّھا ہے</td></tr>
<tr><td>خضر سلطاں کو رکھے خالقِ اکبر سر سبز</td>
<td>شاہ کے باغ میں یہ تازہ نہال اچّھا ہے</td></tr>
<tr><td>ہم کو معلوم ہے جنّت کی حقیقت لیکن</td>
<td>دل کے خوش رکھنے کو غالب یہ خیال اچّھا ہے</td></tr>
</table>

<p>
This one looks gorgeous on every browser that supports the font properly.
This can be combined with the <code>text-align-last</code> for good measure and
forward compatibility, but that is left as an exercise to the developer.

<h2>Single-column</h2>
One problem left unsolved in the previous section is that the two columns do not
necessarily have the same width.  One way I <i>fixed</i> this in RiRa before was
to add a small JavaScript snippet to take the maximum of the two column widths and
apply it to both.  That's a valid hack (short of CSS adding such constructs) but
left out here because I do not want to be the one promoting it.
<p>
An alternative some might prefer, specially for narrow columns or shorter poems
is to just use a single column.  I personally think for this test poem two columns
looks much better.  So for this test case I cut it off at eight lines for
illustration purposes.

<style>
.poetrySingleColumnJustifyCSS3 td {
	text-align: justify;
}
.poetrySingleColumnJustifyCSS3 td::after{
	content: "";
	display: inline-block;
	width: 100%;
}
</style>
<table lang="ur" class="poetrySingleColumnJustifyCSS3">
<tr><td>حسنِ مہ گرچہ بہ ہنگامِ کمال اچّھا ہے</td></tr>
<tr><td>اس سے میرا مہِ خورشید جمال اچّھا ہے</td></tr>
<tr><td>بوسہ دیتے نہیں اور دل پہ ہے ہر لحظہ نگاہ</td></tr>
<tr><td>جی میں کہتے ہیں کہ مفت آئے تو مال اچّھا ہے</td></tr>
<tr><td>اور بازار سے لے آئے اگر ٹوٹ گیا</td></tr>
<tr><td>ساغرِ جم سے مرا جامِ سفال اچّھا ہے</td></tr>
<tr><td>بے طلب دیں تو مزہ اس میں سوا ملتا ہے</td></tr>
<tr><td>وہ گدا جس کو نہ ہو خوۓ سوال اچّھا ہے</td></tr>
</table>

<h2>Conclusions</h2>
I hope you agree that this font looks great for typesetting Urdu poetry.
I cannot wait until a high-quality Persian-style Nastaliq font becomes available for
the web to enjoy.  But until then, I hope web authors enjoy our Urdu Nastaliq font.

<h2>Disclaimer</h2>
As of November 2014, the author works at the Font and Text Rendering team, Google Internationalization Engineering.

</body>
</html>
